{% extends 'admin/inspect.html' %}
{% load i18n static admin_urls admin_modify %}

{% block breadcrumbs %}
<div class="breadcrumbs">
  <a href="{% url 'admin:index' %}">{% trans 'Home' %}</a>
  &rsaquo; <a href="{% url 'admin:app_list' app_label=opts.app_label %}">{{ opts.app_config.verbose_name }}</a>
  &rsaquo; <a href="{% url opts|admin_urlname:'changelist' %}">{{ opts.verbose_name_plural|capfirst }}</a>
  &rsaquo; {{ instance|truncatewords:"18" }}
</div>
{% endblock %}

{% block coltype %}colMS{% endblock %}

{% block content %}
<div id="content-main">
  <h1>Kelas {{ instance }}</h2>
    <ul class="errorlist">
      {% if not instance.rentang_nilai.count %}
        <li>Kelas belum memiliki rentang nilai, buat rentang nila dari A s.d E.</li>
      {% endif %}
    </ul>

  <!-- Module Kelas untuk Wali Kelas -->
  <div class="module">
    <h2 class="subhead">Jadwal Pelajaran (Hari Ini)</h2>
    {% if instance.get_jadwal_pelajaran.count %}
    <table class="model">
      <thead>
      <tr>
        <th width="120">Kode</th>
        <th>Nama</th>
        <th>Guru</th>
        <th width="80">Jam Mulai</th>
        <th width="80">Jam Berakhir</th>
        <th width="70"></th>
      </tr>
      </thead>
      <tbody>
        {% for item in instance.get_jadwal_pelajaran %}
        <tr>
            <td>{{ item.mata_pelajaran_kelas }}</td>
            <td>{{ item.mata_pelajaran_kelas.mata_pelajaran.mata_pelajaran.nama }}</td>
            <td>{{ item.mata_pelajaran_kelas.guru }}</td>
            <td>{{ item.jam_mulai }}</td>
            <td>{{ item.jam_berakhir }}</td>
            <td><a href="{% url 'admin:sister_pembelajaran_matapelajarankelas_inspect' object_id=item.id %}">Tampilkan &rsaquo;</a></td>
        </tr>
        {% endfor %}
            </tbody>
        </table>
      {% else %}
      <table>
      <tr>
          <td colspan="5">Kelas {{ instance }} tidak ada jadwal pelajaran hari ini.</td>
      </tr>
      {% endif %}
    </table>
  </div>
  
  <!-- Module Kelas untuk Wali Kelas -->
  <div class="module">
    <h2 class="subhead">Jadwal Ekstra Kurikuler (Hari Ini)</h2>
    {% if instance.get_jadwal_ekskul.count %}
    <table class="model">
      <thead>
      <tr>
        <th>Nama</th>
        <th width="80">Jam Mulai</th>
        <th width="80">Jam Berakhir</th>
        <th width="70"></th>
      </tr>
      </thead>
      <tbody>
        {% for item in instance.get_jadwal_ekskul %}
        <tr>
            <td>{{ item.ekstra_kurikuler }}</td>
            <td>{{ item.jam_mulai }}</td>
            <td>{{ item.jam_berakhir }}</td>
            <td><a href="{% url 'admin:sister_pembelajaran_matapelajarankelas_inspect' object_id=item.id %}">Tampilkan &rsaquo;</a></td>
        </tr>
        {% endfor %}
            </tbody>
        </table>
      {% else %}
      <table>
      <tr>
          <td colspan="5">Kelas {{ instance }} tidak ada jadwal ekstra kurikuler hari ini.</td>
      </tr>
      {% endif %}
    </table>
  </div>

  <div class="module">
    <h2 class="subhead">Siswa Kelas</h2>
    {% if instance.siswa.count %}
    <table class="model">
      <thead>
      <tr>
        <th width="120">NIS</th>
        <th width="120">NISN</th>
        <th>Nama</th>
        <th>Jenis Kelamin</th>
        <th>Status</th>
        <th width="70"></th>
      </tr>
      </thead>
      <tbody>
        {% for item in instance.siswa.all %}
        <tr>
            <td>{{ item.siswa.nis }}</td>
            <td>{{ item.siswa }}</td>
            <td>{{ item.siswa.person.full_name }}</td>
            <td>{{ item.siswa.person.get_gender_display }}</td>
            <td>{{ item.get_status_display }}</td>
            <td><a href="{% url 'admin:sister_pembelajaran_matapelajarankelas_inspect' object_id=item.id %}">Tampilkan &rsaquo;</a></td>
        </tr>
        {% endfor %}
            </tbody>
        </table>
      {% else %}
      <table>
      <tr>
          <td colspan="5">Anda tidak memiliki kelas yang diampu, mungkin ada bukan guru kelas.</td>
      </tr>
      {% endif %}
    </table>
  </div>

  <p class="small">
    <a href="{% url opts|admin_urlname:'changelist' %}">&lsaquo; {% trans 'Back to' %} {{ opts.verbose_name_plural|capfirst }}</a>
  </p>
</div>
{% endblock %}

{% block sidebar %}
<div id="content-related" class="sidebar">
  <div class="module">
    <div class="module__widget">
      <a class="button" href="{% url 'admin:sister_pembelajaran_rentangnilai_changelist'%}?kelas__id__exact={{ instance.id }}">Rentang Nilai</a>
      <a class="button" href="{% url 'admin:sister_pembelajaran_matapelajarankelas_changelist'%}?kelas__id__exact={{ instance.id }}">Mata Pelajaran</a>
      <a class="button" href="{% url 'admin:sister_pembelajaran_jadwalkelas_changelist'%}?kelas__id__exact={{ instance.id }}">Jadwal Kelas</a>
      <a class="button" href="{% url 'admin:sister_pembelajaran_presensisiswa_changelist'%}?kelas__id__exact={{ instance.id }}">Presensi Siswa</a>
      <a class="button" href="{% url 'admin:sister_pembelajaran_piketkelas_changelist'%}?kelas__id__exact={{ instance.id }}">Piket Kelas</a>
    </div>
  </div>
  <div class="module">
    <div class="module__widget">
      <table>
        <tbody>
            <tr>
                <td><strong>Nama Kelas</strong></td>
                <td>{{ instance.nama_kelas }}</td>
            </tr>
            <tr>
                <td><strong>Guru Kelas</strong></td>
                <td>{{ instance.guru_kelas }}</td>
            </tr>
            <tr>
                <td><strong>Tahun Ajaran</strong></td>
                <td>{{ instance.tahun_ajaran }}</td>
            </tr>
            <tr>
                <td><strong>Kurikulum</strong></td>
                <td>{{ instance.kurikulum }}</td>
            </tr>
            <tr>
                <td><strong>Status</strong></td>
                <td>{{ instance.get_status_display }}</td>
            </tr>
            <tr>
              <td><strong>Ruang</strong></td>
              <td>{{ instance.ruang }}</td>
            </tr>
            <tr>
              <td><strong>Jumlah Siswa</strong></td>
              <td>{{ instance.siswa.count }}</td>
          </tr>
        </tbody>
    </table>
    </div>
  </div>
</div>
{% endblock %}
